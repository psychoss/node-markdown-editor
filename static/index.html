<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="scss/index.css">

</head>

<body>
	<div class="header">
		<div class="toolbar">
			<div class="toolbar-wrapper">

				<span class="toolbar-separator">
        </span>
				<a class="toolbar-button editor-new-btn">
					<i class="material-icons">&#xE89C;</i>
				</a>
				<a class="toolbar-button editor-save-btn">
					<i class="material-icons">save</i>
				</a>
				<span class="toolbar-separator">
        </span>
				<a class="toolbar-button editor-bold-btn">
					<i class="material-icons">format_bold</i>
				</a>
				<a class="toolbar-button editor-italic-btn">
					<i class="material-icons">format_italic</i>
				</a>
				<a class="toolbar-button editor-code-btn">
					<i class="material-icons">code</i>
				</a>
				<span class="toolbar-separator"> </span>
				<a class="toolbar-button editor-sort-btn">
					<i class="material-icons">&#xE053;</i>
				</a>
				<a class="toolbar-button editor-indent-btn">
					<i class="material-icons">&#xE23D;</i>
				</a>

				<a class="toolbar-button editor-bulleted-btn">
					<i class="material-icons">format_list_bulleted</i>
				</a>
				<a class="toolbar-button editor-numeric-btn">
					<i class="material-icons">&#xE242;</i>
				</a>
				<span class="toolbar-separator"></span>
				<a class="toolbar-button">
					<i class="material-icons">remove</i>
				</a>
				<a class="toolbar-button">
					<i class="material-icons">&#xE250;</i>
				</a>
				<a class="toolbar-button editor-insert-image-btn">
					<i class="material-icons">&#xE251;</i>
				</a>
				<span class="toolbar-separator"></span>
				<a class="toolbar-button editor-undo-btn" aria-label="Undo">
					<i class="material-icons">undo</i>
				</a>
				<a class="toolbar-button editor-redo-btn" aria-label="Redo">
					<i class="material-icons">redo</i>
				</a>
				<span class="toolbar-separator"></span>
				<a class="toolbar-button js-button-active">
					<i class="material-icons">&#xE923;</i>
				</a>
				<a class="toolbar-button">
					<i class="material-icons">&#xE8B6;</i>
				</a>
				<a class="toolbar-button js-dropdown" data-bind="toolbar-notes">
					<i class="material-icons">&#xE02F;</i>
				</a>
				<div class="dropdown no-gutter" id="toolbar-notes">
					<div class="dropdown-header">
						<a class="toolbar-combo-button">
						</a>
						<span class="btn-close">
					<i class="material-icons">close</i>
							
						</span>

					</div>


					<div class="fixed">

					</div>



					<!--<div class="note-item" data-bind="{_id}">
						<div class="note-item-content">
							<div class="note-item-title">
								{title}
							</div>
							<div class="note-item-date">
								{modified}
							</div>
						</div>
					</div>-->


				</div>
				<a class="toolbar-button js-dropdown" data-bind="toolbar-more">
					<i class="material-icons">&#xE5D3;</i>
				</a>
				<div class="dropdown" id="toolbar-more">
					<a class="editor-fmt-2-json">Format Code for JSON</a>
				</div>

			</div>
		</div>
	</div>
	<div class="container">

		<div id="editor" class="editor">

		</div>
		<div style="width:50%"></div>
		<div class="markdown-body">

		</div>
	</div>

	<script src="js/utilities.js"></script>
	<script src="js/ajax.js"></script>
	<script src="js/markdown.min.js"></script>

	<script src="ace/ace.js"></script>
	<script src="ace/ext/ext-language_tools.js"></script>


	<!-- Components -->
	<script src="js/abstract.js"></script>
	<script src="js/dialog.js"></script>
	<script src="js/editor.js"></script>

	<script src="js/commands.js"></script>
	<script src="js/app.js"></script>
	<script>
		Ajax.to('/query-all').then(function(t){
			var datas=JSON.parse(t);
					var template="<div class=\"note-item\" ><div class=\"note-item-content\"><div class=\"note-item-title\" data-bind=\"{_id}\">{title}</div><div class=\"note-item-date\">{modified}</div></div></div>\n";
		    var content="";
			datas.forEach(function(v){
			  var line=template;
				Object.keys(v).forEach(function(k){
					var re=new RegExp("{"+k+"}",'g')
					line=line.replace(re,v[k]);
				})
				content+=line;
			})			
			Abstract.beforeend(document.querySelector("#toolbar-notes .fixed"),content);
			bindNotes();
		})
		var bindNotes=function(){
				var notes=	document.querySelectorAll('.note-item-title')
notes=window.$slice.call(notes,0);
if(notes){
	notes.forEach(function(v){
		Abstract.click(v,function(){
			var id=Abstract.atr(v,'data-bind');
			if(id){
Ajax.to('/query-one',{
	body:id
})				
			}
		})
	})
}
		}

	
		
		// document.querySelector('dialog').showModal();
	</script>
</body>

</html>